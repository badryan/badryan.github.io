<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ciseco ARF/XRF Range Test</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4444/2014/05/06/ciseco-arfxrf-range-test.html">
  <link rel="alternate" type="application/rss+xml" title="Opinions &amp; Experiments" href="/feed.xml">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">Opinions &amp; Experiments</a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
            <a class="page-link" href="/about/">Author</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Ciseco ARF/XRF Range Test</h1>
    <p class="post-meta">
      <time datetime="2014-05-06T09:17:31+02:00" itemprop="datePublished">
        
        May 6, 2014
      </time>
      </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><img src="/content/images/2015/09/bigmac.jpg" alt="" /></p>

<p>Ever since I started using <a href="http://shop.ciseco.co.uk/rf-module-range/">Ciseco XRF radio modules</a> for wireless communication, I’ve been fascinated by the possibility to connect even remote corners of the house to the internet; areas where we have neither power sockets nor WiFi coverage. <strong>The theoretical range of the 868 MHz signal reaches into the kilometres</strong> under ideal conditions and using a setup with a <a href="http://openmicros.org/index.php/articles/84-xrf-basics/270-antenna-range-and-measurements">directed antenna</a>. In reality such distances are rarely ever achieved, as the <a href="http://openmicros.org/index.php/articles/84-xrf-basics/300-antenna-range-of-the-xrf-srf-erf-urf-slice-of-radio-and-srf-stick">radio signal is influenced</a> (i.e. absorbed and/or reflected at varying degrees) by very much <em>everything</em> (anecdotally, ranges differ after rain as wet soil reflects radio better than dry soil). Thus, a distance of 2.2km between two successfully communicating XRFs even yielded a <a href="http://openmicros.org/index.php/entry/xrf-link-223km-without-line-of-siteamazing">featured post on the Ciseco website</a> last year. While the Ciseco web shop alludes to a “range expected to be 10′s Km’s” for ARF modules (ARF = “amplified” XRF) wired to an external antenna, in practice I had two XRF modules fail to communicate over a distance of less than ten metres through a relatively thin wall of our house. <strong>Range always depends!</strong> Nevertheless, the ARF carries an air of super power, and so I asked Miles from Ciseco if I could have some ARFs for a systematic comparison with the XRF.</p>

<p>While I’m personally quite interested to tease out the maximum distance between two ARFs using directed parabolic antennas between hill tops (one day…), **you won’t find any absolute range measurements here. **As I wrote previously, on a different day, under different weather conditions, in a different landscape, the maximum range of these modules is always going to be different and it would take a number of replicate measurements to establish the true limits of ARF-based radio communication. What I deemed more useful is the direct comparison between ARFs and XRFs, i.e. everyone with previous XRF experience can probably relate my results to their own setting.</p>

<p>Over the next few weeks I’m planning to test pairs of ARF&lt;-&gt;ARF, ARF&lt;-&gt;XRF and XRF&lt;-&gt;XRF in different scenarios. While I had a temporary setup that tested reach in an urban setting (see my related blog post about <a href="https://iot.ghost.io/on-the-fly-gps-visualisation-through-node-red/">dynamic GPS coordinate plotting</a>, my first systematic test looked at <strong>signal strength in an open place with a few trees</strong>.</p>

<p><img src="/content/images/2015/09/Master.jpg" alt="" /></p>

<p>The experiment saw “<a href="https://twitter.com/BorisAdryan/status/452540504849518592/photo/1">the Big Mac of the IoT</a>” (image in the top left, a Raspberry Pi with a passive XBBO on a Slice of POD to support the radio module with up to 350 mA) mounted at 150 cm at a fixed coordinate at the Cambridge Nightingale Recreation Ground. This device was configured as Slave. Another device, my mobile handset and Master (image to the left), was based on an <a href="http://www.phenoptix.com/products/espruino-board-javascript-on-an-arm-based-board">Espruino</a> JavaScript-based microcontroller, reading radio signals every second and saving signal strength and GPS coordinates to file. The Slave device was powered with a <a href="http://www.maplin.co.uk/p/lithium-ion-2200mah-portable-power-bank-n49lk">mobile USB juice pack</a> (800 mA) and for this test, for the Master I opted for a nondescript 12 V UPS 12 Ah beast of a battery with a 3V3 1117 PowerPod because my GPS dropped out whenever I used my 500 mA Liquidware Lithium Backpack (at 5V with a 3V3 PowerPod). The Master and Slave terminology refers to the configuration of the radio modules in a <a href="http://www.openmicros.org/index.php/articles/84-xrf-basics/146-rssimode">signal strength measurement mode</a>, and I configured an ARF as Master, an ARF as Slave, a XRF as Master and a XRF as Slave. All tests were run with the standard wire whip at 9600 bps.</p>

<p>In brief, every second the Master will send a packet to the Slave. The Slave will measure the incoming signal (in db)Â and send the packet straight back. The Master then measures the RSSI of the incoming and outputs something along the lines of: aSSRSSIS-045aMMRSSIM-046. This reads: The signal strength received at the Slave was -45 db, and the Master measured -46 dB coming from the Slave. In our experiment, I turned a round in the park and every second the Espruino (with my Master) recorded a line such as: <em>aSSRSSIS-026aMMRSSIM-028 09:51:56 52.1777167 0.1495600 6 34.5</em> (that’s the RSSI messages, the time of taking the reading, the latitude and longitude of the measurement, the number of satellites contributing to the fix, and the altitude (usually quite inaccurate)). While very good RSSI values are in the range of -10 db to -20 db, Ciseco say that when “the RSSI figures reach -88 to -92 [db] you’ve reached the maximum distance you can achieve reliably”.</p>

<p>I tested: ARF(Master) vs ARF(Slave), ARF(Master) vs XRF(Slave) and XRF(Master) vs XRF(Slave). A somewhat cleaned yet raw version (lines without GPS fix removed) of my trip is available here: <a href="https://github.com/badryan/web/blob/master/ARFtest_raw.txt">3330 measurements</a>, experiments separated at #####. I then split the dataset into Slave measurements (SS, signal coming from Master) and Master measurements (MM, signal coming from Slave).</p>

<p>To get a visual representation of the data, I created a <a href="http://logic.sysbiol.cam.ac.uk/teaching/ARFtest.html">web page</a> on the basis of <a href="http://www.patrick-wied.at/static/heatmapjs/">heatmap.js</a> <a href="https://github.com/badryan/web/tree/master">see also on Github</a> that encodes my <strong>MM and SS RSSI values as colour tone on a Google Map</strong>. Unfortunately, the heatmap library is not quite perfect yet, so if the data disappears from the view, zooming out one step usually fixes the problem. Here are three maps for the MM values:</p>

<p><img src="/content/images/2015/09/large_map.jpg" alt="" /></p>

<p>The bright green spot in the ARF vs ARF measurements is our ground zero. In principle one can see the trajectories of my survey walks as shades of blue, although for technical reasons a few of the weaker signal strengths are not perfectly rendered for the ARF vs XRF and XRF vs XRF comparisons. A birds eye view over the area best shows the differences in signal strength around the park.</p>

<p><img src="/content/images/2015/09/birdseye.jpg" alt="" /></p>

<p>Note that I didn’t do one particular tour (the prominent line from ground zero towards 7 o’clock) for the ARF vs XRF combination, which no makes it appear as if there was no signal to be detected. (I should have done that one, arrrgh). However, what becomes clear is that overall the ARF vs ARF combination is significantly more powerful.</p>

<p>To quantitate how much more powerful the ARF signal is, I calculated the <strong>distance of each GPS coordinate to our ground zero</strong> (in metres) and plotted the signal strength (in db, closer to 0 is “better”) against it:</p>

<p><img src="/content/images/2015/09/MS.jpg" alt="" />
<img src="/content/images/2015/09/SS.jpg" alt="" /></p>

<p>So what becomes clear is that even at shorter distances, the XRF seems to occasionally struggle if trees or people are in the way, whereas most data points for the ARF are below the -90 db level and suggest that we could increase the distance &gt; 250m and still communicate comfortable. The much better db values for the ARF even for distances &lt; 50m suggest that they may have more power for penetration of walls when used in a home setting.</p>


  </div>

  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">

        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          

          
          <li>
            <a href="https://twitter.com/BorisAdryan"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">BorisAdryan</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Structured and unstructure thoughts. Often IoT-related. Sometimes education-related. By Boris Adryan.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
